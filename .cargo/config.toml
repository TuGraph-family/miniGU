[target.aarch64-unknown-linux-gnu]
linker = "aarch64-linux-gnu-gcc"

[target.aarch64-pc-windows-msvc]
linker = "link.exe"

[target.aarch64-apple-darwin]
# For macOS ARM64, we rely on the system linker
# When cross-compiling, you may need to specify the path to the macOS SDK
# and Python libraries for the target platform
linker = "cc"
rustflags = ["-C", "link-arg=-undefined", "-C", "link-arg=dynamic_lookup"]

[target.x86_64-apple-darwin]
rustflags = ["-C", "link-arg=-undefined", "-C", "link-arg=dynamic_lookup"]

[build]
# For macOS system Python linking issues
# rustflags = [
#   "-C", "link-args=-Wl,-rpath,/Library/Developer/CommandLineTools/Library/Frameworks",
# ]

# 为特定目标平台设置配置
[target.aarch64-unknown-none]
runner = "echo 'Skipping tests on aarch64-unknown-none'"

# 为无标准库平台设置环境变量，避免编译thiserror
[env]
THISERROR_NIGHTLY_TESTING = "1"